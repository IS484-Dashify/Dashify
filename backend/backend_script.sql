DROP DATABASE IF EXISTS IS484;
CREATE DATABASE IS484;
USE IS484;

CREATE TABLE SERVICES(
    SID INTEGER PRIMARY KEY,
    NAME TEXT
);

INSERT INTO SERVICES (SID, NAME) VALUES(1, 'Service 1');
INSERT INTO SERVICES (SID, NAME) VALUES(2, 'Service 2');

CREATE TABLE MACHINES(
    MID INTEGER,
    SID INTEGER,
    NAME TEXT,
    LOCATION TEXT,
    PRIMARY KEY(MID, SID),
    FOREIGN KEY(SID) REFERENCES SERVICES(SID)
);
INSERT INTO MACHINES (MID, SID, NAME, LOCATION) VALUES(1, 1, 'VM1', '[9.5018, 562639]');
INSERT INTO MACHINES (MID, SID, NAME, LOCATION) VALUES(2, 1, 'VM2', '[9.5018, 562639]');
INSERT INTO MACHINES (MID, SID, NAME, LOCATION) VALUES(3, 2, 'VM3', '[9.5018, 562639]');
INSERT INTO MACHINES (MID, SID, NAME, LOCATION) VALUES(4, 2, 'VM4', '[9.5018, 562639]');

CREATE TABLE COMPONENTS(
    CID INTEGER,
    MID INTEGER,
    NAME TEXT,
    PRIMARY KEY(CID, MID),
    FOREIGN KEY(MID) REFERENCES MACHINES(MID)
);

INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(1, 1, 'Node.js Server');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(2, 1, 'SQL Server');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(3, 1, 'Machine');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(4, 2, 'Node.js Server');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(5, 2, 'SQL Server');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(6, 2, 'Machine');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(7, 3, 'Node.js Server');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(8, 3, 'SQL Server');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(9, 3, 'Machine');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(10, 4, 'Node.js Server');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(11, 4, 'SQL Server');
INSERT INTO COMPONENTS (CID, MID, NAME) VALUES(12, 4, 'Machine');

CREATE TABLE RESULTS(
    DATETIME DATETIME,
    MID INTEGER,
    CID INTEGER,
    DISK_USAGE FLOAT,
    TRAFFIC_IN INTEGER,
    TRAFFIC_OUT INTEGER,
    CLOCK FLOAT,
    CPU_USAGE FLOAT,
    SYSTEM_UPTIME FLOAT,
    MEMORY_USAGE FLOAT,
    PRIMARY KEY(DATETIME, MID, CID),
    FOREIGN KEY(MID, CID) REFERENCES COMPONENTS(MID, CID)
);

INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 1, 1, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 1, 2, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 1, 3, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 2, 4, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 2, 5, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 2, 6, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 3, 7, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 3, 8, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 3, 9, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 4, 10, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 4, 11, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');
INSERT INTO RESULTS (DATETIME, MID, CID, DISK_USAGE, TRAFFIC_IN, TRAFFIC_OUT, CLOCK, CPU_USAGE, SYSTEM_UPTIME, MEMORY_USAGE) VALUES('2024-02-29 17:54:03', 4, 12, '32.87', '0', '35312', '1709200443', '0.43', '44573', '0.0');